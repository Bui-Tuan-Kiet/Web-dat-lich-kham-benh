<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <title>Đăng Ký - Đặt Lịch Khám Bệnh</title>
    <link rel="shortcut icon" type="image/x-icon" href="../AdminLayout/assets/img/favicon.ico">

    <!-- Bootstrap & Font Awesome -->
    <link rel="stylesheet" href="../AdminLayout/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../AdminLayout/assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="../AdminLayout/assets/css/style.css">
</head>

<body>
    <div class="main-wrapper account-wrapper">
        <div class="account-page">
            <div class="account-center">
                <div class="account-box">
                    <form id="registerForm" class="form-signin">
                        <div class="account-logo text-center mb-4">
                            <a href="Trangchu.html">
                                <img src="../img/logo.png" alt="Logo" style="height: 50px;">
                            </a>
                        </div>
                        <div class="form-group">
                            <label>Họ tên người dùng</label>
                            <input type="text" name="tenDangNhap" class="form-control" placeholder="Nhập họ tên" required style="border: 1px solid black;">
                        </div>
                        
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" name="email" class="form-control" placeholder="Nhập email" required style="border: 1px solid black;">
                        </div>
                        
                        <div class="form-group">
                            <label>Mật khẩu</label>
                            <input type="password" name="matKhau" class="form-control" placeholder="Nhập mật khẩu" required style="border: 1px solid black;">
                        </div>
                        
                        <div class="form-group">
                            <label>Số điện thoại</label>
                            <input type="tel" name="soDienThoai" class="form-control" placeholder="Nhập số điện thoại" required style="border: 1px solid black;">
                        </div>
                        
                        <div class="form-group checkbox">
                            <label>
                                <input type="checkbox" required> Tôi đồng ý với <a href="#">Điều khoản & Chính sách</a>
                            </label>
                        </div>

                        <div class="form-group text-center">
                            <button class="btn btn-primary account-btn" type="submit">Đăng Ký</button>
                        </div>

                        <div class="text-center login-link">
                            Đã có tài khoản? <a href="login.html">Đăng Nhập</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
       document.getElementById("registerForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const form = e.target;
        const data = {
            tenDangNhap: form.tenDangNhap.value.trim(),
            matKhau: form.matKhau.value.trim(),
            email: form.email.value.trim(),
            soDienThoai: form.soDienThoai.value.trim()
        };

        fetch("http://localhost:5000/api/dangky", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        })
        .then(res => res.json())
        .then(res => {
            if (res.success) {
                alert("Đăng ký thành công!");
                // Lưu thông tin đăng nhập giả lập
                localStorage.setItem("isLoggedIn", "true");
                localStorage.setItem("userName", data.tenDangNhap);
                window.location.href = "Datlichkhambenh.html";
            } else {
                alert("Lỗi: " + res.message);
            }
        })
        .catch(err => {
            console.error(err);
            alert("Đăng ký thất bại!");
        });
    });
        </script>
        
    <!-- JS -->
    <script src="../AdminLayout/assets/js/jquery-3.2.1.min.js"></script>
    <script src="../AdminLayout/assets/js/popper.min.js"></script>
    <script src="../AdminLayout/assets/js/bootstrap.min.js"></script>
    <script src="../AdminLayout/assets/js/app.js"></script>
</body>
</html>
